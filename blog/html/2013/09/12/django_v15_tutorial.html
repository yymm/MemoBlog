<!DOCTYPE html><!--[if lt IE 7]>      <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
        <title>Django 1.5 ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ« ã¾ã¨ã‚ &mdash; MemoBlog</title>
            <link rel="stylesheet" href="../../../_static/normalize.css" type="text/css">
            <link rel="stylesheet" href="../../../_static/sphinx.css" type="text/css">
            <link rel="stylesheet" href="../../../_static/main.css" type="text/css">
            <link rel="stylesheet" href="../../../_static/flat.css" type="text/css">
            <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
            <link rel="stylesheet" href="../../../_static/webfont.css" type="text/css">
        <link rel="shortcut icon" href="../../../_static/tinkerer.ico" /><!-- Load modernizr and JQuery -->
        <script src="../../../_static/vendor/modernizr-2.6.2.min.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="../../../_static/vendor/jquery-1.8.2.min.js"><\/script>')</script>
        <script src="../../../_static/plugins.js"></script>
        <script src="../../../_static/main.js"></script>
        <link rel="next" title="pyenvãªå¤ in 2013" href="../../08/18/pyenv.html" /><link rel="prev" title="gitãŒæ‰‹ã«ãªã˜ã¾ãªã„äººã¸hg-gitã®ã‚¹ã‚¹ãƒ¡" href="../../10/02/hg_git.html" /><link rel="alternate" type="application/rss+xml" title="RSS" href="../../../rss.html" /><script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '1.3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script><script type="text/javascript" src="../../../_static/underscore.js"></script><script type="text/javascript" src="../../../_static/doctools.js"></script><script type="text/javascript" src="../../../_static/disqus.js"></script><script type="text/javascript" src="../../../_static/google_analytics.js"></script>

	<!-- for hatena -->
	<script type="text/javascript" src="http://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>

	<!-- for gogogle + -->
	<script type="text/javascript">
	  window.___gcfg = {lang: 'ja'};
	  (function() {
	    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
	    po.src = 'https://apis.google.com/js/plusone.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
	  })();
	</script>

	<!-- for kudos -->
	<script src=http://yymm.bitbucket.org/blog/html/_static/kudosplease.js></script>
	<link rel="stylesheet" href=http://yymm.bitbucket.org/blog/html/_static/mykudosplease.css>
    <script type="text/javascript">
        $(document).ready(function () {
            // Scroll to content if on small screen
            if (screen.width < 480)
            {
                $(document).scrollTop(document.getElementsByTagName("article")[0].offsetTop - 44);
            }
        });
    </script></head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

      <div id="container"><header>
            <hgroup>
              <h1><a href="../../../index.html">MemoBlog</a></h1><h2>_memo_memo_p(.. )</h2></hgroup>
          </header>
      <nav>
            <ul><li class="main-nav">
                  <a href="../../../index.html">Home</a>
                </li>
              </ul>
          </nav><div class="main-container"><div class="main wrapper clearfix"><article><div class="timestamp postmeta">
            <span>September 12, 2013</span>
        </div>
	
	<!-- Twitter button -->
	<a href="https://twitter.com/share" class="twitter-share-button" data-lang="ja">$B%D%$!<%H(B</a>
	<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
	<!-- Hatena button -->
	<a href="http://b.hatena.ne.jp/entry/http://yymm.bitbucket.org/2013/09/12/django_v15_tutorial.html" class="hatena-bookmark-button" data-hatena-bookmark-title="Django 1.5 ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ« ã¾ã¨ã‚ - MemoBlog" data-hatena-bookmark-layout="standard-balloon" title="$B$3$N%(%s%H%j!<$r$O$F$J%V%C%/%^!<%/$KDI2C(B"><img src="http://b.st-hatena.com/images/entry-button/button-only.gif" alt="$B$3$N%(%s%H%j!<$r$O$F$J%V%C%/%^!<%/$KDI2C(B" width="20" height="20" style="border: none;" /></a>
	<!-- Google+ button -->
	<div class="g-plusone" data-size="medium"></div>
	
	
	<div class="kudo">
		<div class="kudos" data-amount="0" data-url="yymm.bitbucket.org/blog/persistent"></div>
	</div>
	
    <div class="section" id="django-1-5">
<h1><a class="toc-backref" href="#id13">Django 1.5 ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ« ã¾ã¨ã‚</a></h1>
<p>1å¹´ãã‚‰ã„ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ã¦æŒ«æŠ˜ã—ãŸDjangoã‚’ã‚„ã£ã¦ã¿ã‚‹ã€‚pollsã®ã‚¢ãƒ¬ã§ã‚ã‚‹ã€‚</p>
<p>ä»•äº‹ã®å‚ã‚‰Flaskã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œã£ãŸçµŒé¨“ã®ãŠã‹ã’ã‹ãªã‚“ã¨ã‹ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã¯ã§ããŸã€‚</p>
<p>ã‚‚ã†è‹±èªã‚’èª­ã¿ãªãŠã™ã®ã¯è¾›ã„ã®ã§æ—¥æœ¬èªã§ãƒ¡ãƒ¢ã—ã¦ãŠãã€‚</p>
<p><a class="reference external" href="https://docs.djangoproject.com/en/1.5/intro/tutorial01/">Writing your first Django app, part 1 | Django documentation | Django</a></p>
<p>part6ã¾ã§ã‚ã‚‹ã€‚è¾›ã‹ã£ãŸã€‚part3ãã‚‰ã„ã§è«¦ã‚ãã†ã«ãªã£ãŸã€‚</p>
<p>Django 1.6ãŒé–‹ç™ºä¸­ã§ã™ãŒã€1.5ã§ã™ã€‚</p>
<p><a class="reference external" href="https://docs.djangoproject.com/en/dev/releases/1.6/">Django 1.6 release notes - UNDER DEVELOPMENT | Django documentation | Django</a></p>
<hr class="docutils" />
<div class="contents topic" id="id1">
<p class="topic-title first">ç›®æ¬¡</p>
<ul class="simple">
<li><a class="reference internal" href="#django-1-5" id="id13">Django 1.5 ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ« ã¾ã¨ã‚</a><ul>
<li><a class="reference internal" href="#id2" id="id14">ç’°å¢ƒ</a></li>
<li><a class="reference internal" href="#id3" id="id15">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ &amp; ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š</a></li>
<li><a class="reference internal" href="#admin" id="id16">Adminç”»é¢ã‚’ä½œã‚‹</a><ul>
<li><a class="reference internal" href="#hostport" id="id17">HOSTã¨PORTã®å¤‰æ›´</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id4" id="id18">ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆ</a><ul>
<li><a class="reference internal" href="#id5" id="id19">ãƒ¢ãƒ‡ãƒ«ä½œæˆ</a><ul>
<li><a class="reference internal" href="#id6" id="id20">ãƒ¢ãƒ‡ãƒ«æ“ä½œ</a></li>
<li><a class="reference internal" href="#id7" id="id21">adminç”»é¢ã§ãƒ¢ãƒ‡ãƒ«æ“ä½œ</a></li>
<li><a class="reference internal" href="#id8" id="id22">adminç”»é¢ã®ã‚«ã‚¹ã‚¿ãƒ </a></li>
</ul>
</li>
<li><a class="reference internal" href="#view" id="id23">Viewä½œæˆ</a><ul>
<li><a class="reference internal" href="#id9" id="id24">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä½¿ç”¨</a></li>
<li><a class="reference internal" href="#id10" id="id25">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ç”¨ã™ã‚‹view</a></li>
</ul>
</li>
<li><a class="reference internal" href="#form" id="id26">formå‡¦ç†</a><ul>
<li><a class="reference internal" href="#view-generic-views" id="id27">viewã®æ”¹å–„ - generic views -</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#django" id="id28">Djangoã®ãƒ†ã‚¹ãƒˆ</a><ul>
<li><a class="reference internal" href="#model" id="id29">modelã®ãƒ†ã‚¹ãƒˆ</a></li>
<li><a class="reference internal" href="#id11" id="id30">viewã®ãƒ†ã‚¹ãƒˆ</a></li>
<li><a class="reference internal" href="#id12" id="id31">ãƒ†ã‚¹ãƒˆã«ã¤ã„ã¦</a><ul>
<li><a class="reference internal" href="#selenium" id="id32">Selenium</a></li>
<li><a class="reference internal" href="#coverage-py" id="id33">coverage.py</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#look-and-feel" id="id34">Look and Feel</a></li>
<li><a class="reference internal" href="#tips" id="id35">ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã«ã¯ãªã„Tips</a><ul>
<li><a class="reference internal" href="#mysql" id="id36">MySQLã‚’ä½¿ã†</a></li>
<li><a class="reference internal" href="#django-suit" id="id37">Django Suit</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<hr class="docutils" />
<div class="section" id="id2">
<h2><a class="toc-backref" href="#id14">ç’°å¢ƒ</a></h2>
<ul class="simple">
<li>Python 3.3.2</li>
<li>Django 1.5.2</li>
<li>pythonz</li>
</ul>
<p>pythonã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã«ã¯ã€pythonbrewã¨ã‹pythonzã¨ã‹pyenvã¨ã‹è‰²ã€…ã‚ã‚‹ãŒã€</p>
<p>è‡ªåˆ†ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç’°å¢ƒã®Pythonã®pipã«virtualenv &amp; virtualenvwrapperã‚’å…¥ã‚Œã¦ã€pythonzã§è‰²ã‚“ãªãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å…¥ã‚Œã‚‹ã“ã¨ã§ç®¡ç†ã—ã¦ã„ã‚‹ã€‚</p>
<div class="highlight-bash"><div class="highlight"><pre>% mkvirtualenv -p /path/to/pythonz/pythons/CPython-2.7.5/bin/python2.7 Django
<span class="o">(</span>Django<span class="o">)</span>% pip install django
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h2><a class="toc-backref" href="#id15">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ &amp; ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š</a></h2>
<div class="highlight-bash"><div class="highlight"><pre>% django-admin startproject mysite
% <span class="nb">cd </span>mysite
</pre></div>
</div>
<p>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®è¨­å®šã‚’ã™ã‚‹ãŸã‚ã«ã€mysite/setting.pyã‚’ç·¨é›†ã™ã‚‹ã€‚</p>
<p>DATABASESã§SQliteã‚’ä½¿ç”¨ã™ã‚‹è¨­å®šã‚’ã™ã‚‹ã€‚</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s">&#39;django.db.backends.sqlite3&#39;</span><span class="p">,</span> <span class="c"># Add &#39;postgresql_psycopg2&#39;, &#39;mysql&#39;, &#39;sqlite3&#39; or &#39;oracle&#39;.</span>
      <span class="s">&#39;NAME&#39;</span><span class="p">:</span> <span class="s">&#39;sqlite3.db&#39;</span><span class="p">,</span>                      <span class="c"># Or path to database file if using sqlite3.</span>
      <span class="c"># The following settings are not used with sqlite3:</span>
      <span class="s">&#39;USER&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
      <span class="s">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
      <span class="s">&#39;HOST&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">,</span>                      <span class="c"># Empty for localhost through domain sockets or &#39;127.0.0.1&#39; for localhost through TCP.</span>
      <span class="s">&#39;PORT&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">,</span>                      <span class="c"># Set to empty string for default.</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆã€‚</p>
<div class="highlight-bash"><div class="highlight"><pre>% python manage.py syncdb
</pre></div>
</div>
<p>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é–¢é€£ã‚’ç·¨é›†ã—ãŸéš›ã«ã¯ã“ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã€‚</p>
</div>
<div class="section" id="admin">
<h2><a class="toc-backref" href="#id16">Adminç”»é¢ã‚’ä½œã‚‹</a></h2>
<ul class="simple">
<li>settings.py : 1ç®‡æ‰€</li>
<li>urls.py : 3ç®‡æ‰€</li>
</ul>
<p>ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã‚’è§£é™¤ã™ã‚‹ã ã‘ã€‚</p>
<p><strong>settings.py</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s">&#39;django.contrib.auth&#39;</span><span class="p">,</span>
    <span class="s">&#39;django.contrib.contenttypes&#39;</span><span class="p">,</span>
    <span class="s">&#39;django.contrib.sessions&#39;</span><span class="p">,</span>
    <span class="s">&#39;django.contrib.sites&#39;</span><span class="p">,</span>
    <span class="s">&#39;django.contrib.messages&#39;</span><span class="p">,</span>
    <span class="s">&#39;django.contrib.staticfiles&#39;</span><span class="p">,</span>
    <span class="c"># Uncomment the next line to enable the admin:</span>
    <span class="s">&#39;django.contrib.admin&#39;</span><span class="p">,</span>
    <span class="c"># Uncomment the next line to enable admin documentation:</span>
    <span class="c"># &#39;django.contrib.admindocs&#39;,</span>
<span class="p">)</span>
</pre></div>
</div>
<p><strong>urls.py</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Uncomment the next two lines to enable the admin:</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="n">admin</span><span class="o">.</span><span class="n">autodiscover</span><span class="p">()</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span>
    <span class="c"># Examples:</span>
    <span class="c"># url(r&#39;^$&#39;, &#39;mysite.views.home&#39;, name=&#39;home&#39;),</span>
    <span class="c"># url(r&#39;^mysite/&#39;, include(&#39;mysite.foo.urls&#39;)),</span>

    <span class="c"># Uncomment the admin/doc line below to enable admin documentation:</span>
    <span class="c"># url(r&#39;^admin/doc/&#39;, include(&#39;django.contrib.admindocs.urls&#39;)),</span>

    <span class="c"># Uncomment the next line to enable the admin:</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^admin/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã—ãŸã‚‰ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã€<a class="reference external" href="http://127.0.0.1:8000/admin">http://127.0.0.1:8000/admin</a>/ã§ç¢ºèªã€‚</p>
<div class="highlight-bash"><div class="highlight"><pre>% python manage.py syncdb
% python manage.py runserver
</pre></div>
</div>
<div class="section" id="hostport">
<h3><a class="toc-backref" href="#id17">HOSTã¨PORTã®å¤‰æ›´</a></h3>
<div class="highlight-bash"><div class="highlight"><pre>% python manage.py runserver XXX.XXX.XXX.XXX:XXXX
</pre></div>
</div>
<p><a class="reference external" href="http://XXX.XXX.XXX.XXX:XXXX">http://XXX.XXX.XXX.XXX:XXXX</a>/ã§ç¢ºèªã€‚</p>
</div>
</div>
<div class="section" id="id4">
<h2><a class="toc-backref" href="#id18">ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆ</a></h2>
<p>pollsã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³(æŠ•ç¥¨ã‚¢ãƒ—ãƒª)ã‚’ä½œã‚‹ã€‚</p>
<div class="highlight-bash"><div class="highlight"><pre>% python manage.py startapp polls
</pre></div>
</div>
<div class="section" id="id5">
<h3><a class="toc-backref" href="#id19">ãƒ¢ãƒ‡ãƒ«ä½œæˆ</a></h3>
<p>pollsä»¥ä¸‹ã«ã‚ã‚‹models.pyã€‚</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">from</span> <span class="nn">django.utils</span> <span class="kn">import</span> <span class="n">timezone</span>
<span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Poll</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">question</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
    <span class="n">pub_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="s">&#39;date published&#39;</span><span class="p">)</span>

    <span class="c">#def __unicode__(self):</span>
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">question</span>

    <span class="k">def</span> <span class="nf">was_published_recently</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">now</span> <span class="o">=</span> <span class="n">timezone</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">now</span> <span class="o">-</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pub_date</span> <span class="o">&lt;</span>  <span class="n">now</span>

<span class="k">class</span> <span class="nc">Choice</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">poll</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Poll</span><span class="p">)</span>
    <span class="n">choice_text</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
    <span class="n">votes</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c">#def __unicode__(self):</span>
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">choice_text</span>
</pre></div>
</div>
<p>python3ç³»ã‚’ä½¿ã†å ´åˆã¯__unicode__ã§ãªã__str__ã‚’ä½¿ã‚ãªã„ã¨æ­£å¸¸ã«å‹•ã‹ãªã‹ã£ãŸã€‚è©³ã—ã„ã“ã¨ã¯ã‚ã‹ã‚‰ãªã„ã®ã§ã‚ã‹ã‚‹æ–¹ãŒã„ã‚Œã°æ˜¯éã€‚</p>
<div class="section" id="id6">
<h4><a class="toc-backref" href="#id20">ãƒ¢ãƒ‡ãƒ«æ“ä½œ</a></h4>
<p>manage.py shellã‚’ä½¿ã£ã¦æ“ä½œã—ã¦ã¿ã‚‹ã€‚</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>python manage.py shell
&gt;&gt;&gt; from polls.models import Poll, Choice
&gt;&gt;&gt; Poll.objects.all<span class="o">()</span>
&gt;&gt;&gt; Poll.objects.filter<span class="o">(</span><span class="nv">id</span><span class="o">=</span>1<span class="o">)</span>
&gt;&gt;&gt; Poll.objects.filter<span class="o">(</span><span class="nv">question__startswith</span><span class="o">=</span><span class="s1">&#39;SearchWord&#39;</span><span class="o">)</span>
&gt;&gt;&gt; Poll.objects.get<span class="o">(</span><span class="nv">pub_date__year</span><span class="o">=</span>current_year<span class="o">)</span>
&gt;&gt;&gt; <span class="nv">p</span> <span class="o">=</span> Poll.objects.get<span class="o">(</span><span class="nv">pk</span><span class="o">=</span>1<span class="o">)</span> <span class="c"># Primary_Key</span>
&gt;&gt;&gt; <span class="nv">c</span> <span class="o">=</span> p.choice_set.create<span class="o">(</span><span class="nv">choice_text</span><span class="o">=</span><span class="s1">&#39;Just hacking again&#39;</span>, <span class="nv">votes</span><span class="o">=</span>0<span class="o">)</span>
&gt;&gt;&gt; c.delete<span class="o">()</span>
</pre></div>
</div>
<p>Django ORMã®è©³ç´°ã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚‚ã†ã€‚ã“ã“ã§ã¯æ‰±ã‚ãªã„ã€‚</p>
<p><a class="reference external" href="https://docs.djangoproject.com/en/1.5/topics/db/">Models and databases | Django documentation | Django</a></p>
</div>
<div class="section" id="id7">
<h4><a class="toc-backref" href="#id21">adminç”»é¢ã§ãƒ¢ãƒ‡ãƒ«æ“ä½œ</a></h4>
<p>adminç”»é¢ã‹ã‚‰ã‚‚ãƒ¢ãƒ‡ãƒ«ã‚’æ“ä½œã§ãã‚‹ã€‚</p>
<p>ä½œæˆã—ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ•ã‚©ãƒ«ãƒ€(pollsãƒ•ã‚©ãƒ«ãƒ€)ã«admin.pyã‚’ä½œæˆã™ã‚‹ã€‚</p>
<p>django.contribãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã‚ã‚‹adminã‚’ä½¿ç”¨ã—ã¦ã€adminã‚µã‚¤ãƒˆã«ãƒ¢ãƒ‡ãƒ«ã‚’è¿½åŠ ã™ã‚‹ã€‚(admin.site.register)</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">polls.models</span> <span class="kn">import</span> <span class="n">Poll</span><span class="p">,</span> <span class="n">Choice</span>

<span class="c">#class PollAdmin(admin.ModelAdmin):</span>
    <span class="c">#fields = [&#39;pub_date&#39;, &#39;question&#39;]</span>

<span class="k">class</span> <span class="nc">PollAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">fieldsets</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;question&#39;</span><span class="p">]}),</span>
            <span class="p">(</span><span class="s">&#39;Date information&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;pub_date&#39;</span><span class="p">]}),</span>
    <span class="p">]</span>

<span class="c">#class PollAdmin(admin.ModelAdmin):</span>
    <span class="c">#fieldsets = [</span>
            <span class="c">#(None,               {&#39;fields&#39;: [&#39;question&#39;]}),</span>
            <span class="c">#(&#39;Date information&#39;, {&#39;fields&#39;: [&#39;pub_date&#39;], &#39;classes&#39;: [&#39;collapse&#39;]}),</span>
    <span class="c">#]</span>

<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Poll</span><span class="p">,</span> <span class="n">PollAdmin</span><span class="p">)</span>
<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Choice</span><span class="p">)</span>
</pre></div>
</div>
<p>è¡¨ç¤ºã™ã‚‹é …ç›®ã¯admin.ModelAdminã‚’ç¶™æ‰¿ã—ãŸã‚¯ãƒ©ã‚¹ã‚’ä½œæˆã—ã€fieldsã¾ãŸã¯fieldsetsã«è¨­å®šã™ã‚‹ã€‚</p>
<p>ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚ã‚‹ãƒ¢ãƒ‡ãƒ«ã¯ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã§è¡¨ç¤ºã§ãã‚‹æ–¹ãŒè¦‹ã‚„ã™ã„ã€‚ãã‚“ãªæ›¸ãæ–¹ã‚‚ã§ãã‚‹ã€‚</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">polls.models</span> <span class="kn">import</span> <span class="n">Choice</span><span class="p">,</span> <span class="n">Poll</span>

<span class="k">class</span> <span class="nc">ChoiceInline</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">StackedInline</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Choice</span>
    <span class="n">extra</span> <span class="o">=</span> <span class="mi">3</span> <span class="c"># ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³æ™‚ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¡¨ç¤ºæ•°</span>

<span class="k">class</span> <span class="nc">PollAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">fieldsets</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="bp">None</span><span class="p">,</span>               <span class="p">{</span><span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;question&#39;</span><span class="p">]}),</span>
        <span class="p">(</span><span class="s">&#39;Date information&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;fields&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;pub_date&#39;</span><span class="p">],</span> <span class="s">&#39;classes&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;collapse&#39;</span><span class="p">]}),</span>
    <span class="p">]</span>
    <span class="n">inlines</span> <span class="o">=</span> <span class="p">[</span><span class="n">ChoiceInline</span><span class="p">]</span>

<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Poll</span><span class="p">,</span> <span class="n">PollAdmin</span><span class="p">)</span>
</pre></div>
</div>
<p>admin.StackedInlineã‚’ç¶™æ‰¿ã—ãŸã‚¯ãƒ©ã‚¹ã‚’ä½œæˆã—ã€ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚ã‚‹å¯¾è±¡ã®ã‚¯ãƒ©ã‚¹ã®inlinesã«æŒ‡å®šã™ã‚Œã°ã„ã„ã€‚</p>
<p>inlinesã¯Listãªã®ã§è¤‡æ•°æŒ‡å®šã™ã‚‹äº‹ãŒå¯èƒ½ã€‚</p>
<p>StackedInlineã®ä»£ã‚ã‚Šã«TabularInlineã‚’ä½¿ã†ã¨ãƒ†ãƒ¼ãƒ–ãƒ«å½¢å¼ã§è¡¨ç¤ºã§ãã‚‹ã€‚(ã¡ã‚‡ã£ã¨ã‚¹ãƒƒã‚­ãƒªã™ã‚‹)</p>
<p>adminãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒã‚ã‚‹contribãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã¤ã„ã¦ã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã€‚</p>
<p><a class="reference external" href="https://docs.djangoproject.com/en/1.5/ref/contrib/">contrib packages | Django documentation | Django</a></p>
</div>
<div class="section" id="id8">
<h4><a class="toc-backref" href="#id22">adminç”»é¢ã®ã‚«ã‚¹ã‚¿ãƒ </a></h4>
<p>å…ˆã»ã©admin.pyã«ä½œæˆã—ãŸè¡¨ç¤ºå†…å®¹ã‚’æŒ‡å®šã™ã‚‹ã‚¯ãƒ©ã‚¹(PollAdmin)ã«è¡¨ç¤ºã™ã‚‹é …ç›®ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã§ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå‡ºæ¥ã‚‹ã€‚</p>
<p>list_display = (Tuple)ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã§changeã®è¡¨ç¤ºé …ç›®ã‚’å¤‰æ›´ã§ãã‚‹ã€‚</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">PollAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">/.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="c"># ...(åŒã˜)</span>
    <span class="n">list_display</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;question&#39;</span><span class="p">,</span> <span class="s">&#39;pub_date&#39;</span><span class="p">,</span> <span class="s">&#39;was_published_recently&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>list_displayã«ã¯ãƒ¡ã‚½ãƒƒãƒ‰ã‚‚è¿½åŠ ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚</p>
<p>è¡¨ç¤ºå†…å®¹ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã€‚è¡¨ç¤ºå†…å®¹ã®å¤‰æ›´ã¯models.pyã§è¡Œã†ã€‚</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Poll</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c"># ...(åŒã˜)</span>
    <span class="k">def</span> <span class="nf">was_published_recently</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pub_date</span> <span class="o">&gt;=</span> <span class="n">timezone</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">was_published_recently</span><span class="o">.</span><span class="n">admin_order_field</span> <span class="o">=</span> <span class="s">&#39;pub_date&#39;</span>
    <span class="n">was_published_recently</span><span class="o">.</span><span class="n">boolean</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">was_published_recently</span><span class="o">.</span><span class="n">short_description</span> <span class="o">=</span> <span class="s">&#39;Published recently?&#39;</span>
</pre></div>
</div>
<p>æŒ‡å®šã—ã¦ã„ã‚‹é …ç›®ã®èª¬æ˜</p>
<ul class="simple">
<li>admin_order_field : ä¸¦ã¹æ›¿ãˆæŒ‡å®š</li>
<li>boolean : booleanå‹æŒ‡å®š</li>
<li>short_description : è¡¨ç¤ºã•ã‚Œã‚‹èª¬æ˜ã€‚æŒ‡å®šã—ãªã„ã¨&#8217;was_published_recently&#8217;ã«ãªã‚‹ã€‚</li>
</ul>
<p>ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã€æ¤œç´¢ã€éšå±¤ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãªã©ã‚‚è¿½åŠ ã§ãã‚‹ã€‚ä¾¿åˆ©ã€‚</p>
<p>list_filter, search_fields, date_hierarchyãªã©ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã§ã“ã‚Œã‚‰ã®é …ç›®ã‚’è¿½åŠ ã§ãã‚‹ã€‚</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">PollAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">/.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="c"># ...(åŒã˜)</span>
    <span class="n">list_filter</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;pub_date&#39;</span><span class="p">]</span>      <span class="c"># ãƒ•ã‚£ãƒ«ã‚¿ã®è¿½åŠ </span>
    <span class="n">search_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;question&#39;</span><span class="p">]</span>    <span class="c"># æ¤œç´¢ã®è¿½åŠ </span>
    <span class="n">date_hierarchy</span> <span class="o">=</span> <span class="s">&#39;pub_date&#39;</span>     <span class="c"># æ—¥ä»˜ãƒŠãƒ“ã®è¿½åŠ </span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="view">
<h3><a class="toc-backref" href="#id23">Viewä½œæˆ</a></h3>
<p>Djangoã§ã„ã†Viewã¯ã€MVCãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§è¨€ã†Controllerã«ç›¸å½“ã™ã‚‹ã€‚(Djangoã¯MVT[Model-View-Template]ã€‚ <a class="reference external" href="http://www.djangoproject.jp/doc/ja/1.0/faq/general.html#django-mvc-controller-view-view-template">FAQ: å…¨èˆ¬ â€” Django v1.0 documentation</a> )</p>
<p>polls/views.pyã«viewã®å‡¦ç†ã‚’æ›¸ã„ã¦ã„ãã€‚ä»¥ä¸‹ã¯ä¸€ç•ªã‚·ãƒ³ãƒ—ãƒ«ãªä¾‹ã€‚</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span>

<span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s">&#39;Hello! You are at the poll index&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>æ¬¡ã«urlpatternsã‚’æ›¸ã„ã¦ã„ãã€‚urls.pyã«è¨˜è¿°ã™ã‚‹ã€‚</p>
<p>polls/urls.py</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">patterns</span><span class="p">,</span> <span class="n">url</span>

<span class="kn">from</span> <span class="nn">polls</span> <span class="kn">import</span> <span class="n">views</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;index&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>mysite.urls.pyã®urlpatternsã«ã‚‚ä»¥ä¸‹ã‚’è¿½åŠ ã™ã‚‹ã€‚</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">url</span><span class="p">(</span><span class="s">r&#39;^polls/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s">&#39;polls.urls&#39;</span><span class="p">)),</span>
</pre></div>
</div>
<p>ã“ã‚Œã§ã€<a class="reference external" href="http://localhost:8000/polls">http://localhost:8000/polls</a>/ã§&#8217;Hello! You are at the poll index&#8217;ã¨è¡¨ç¤ºã•ã‚Œã‚‹ã€‚</p>
<p>urlé–¢æ•°ã®å¼•æ•°ã¯å…ˆé ­ã‹ã‚‰</p>
<ol class="arabic simple">
<li>ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°(æ­£è¦è¡¨ç¾)</li>
<li>viewã®é–¢æ•°</li>
<li>ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰è¦‹ãˆã‚‹åå‰</li>
</ol>
<p>ã–ã£ãã‚Šã®èª¬æ˜ãªã®ã§è©³ç´°ã¯ -&gt; <a class="reference external" href="https://docs.djangoproject.com/en/1.5/topics/http/urls/#naming-url-patterns">URL dispatcher | Django documentation | Django</a></p>
<div class="section" id="id9">
<h4><a class="toc-backref" href="#id24">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä½¿ç”¨</a></h4>
<p>polls/templates/polls/ã‚’ä½œæˆã—ã¦ã€index.htmlã€detail.htmlã‚’ä½œæˆã—ã¾ã™ã€‚</p>
<p>polls/index.html</p>
<div class="highlight-html"><div class="highlight"><pre>{% if latest_poll_list %}
      <span class="nt">&lt;ul&gt;</span>
              {% for poll in latest_poll_list %}
              <span class="nt">&lt;li&gt;</span>
                      <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;{% url &#39;polls:detail&#39; poll.id %}&quot;</span><span class="nt">&gt;</span>{{ poll.question }}<span class="nt">&lt;/a&gt;</span>
              <span class="nt">&lt;/li&gt;</span>
              {% endfor %}
      <span class="nt">&lt;/ul&gt;</span>
{% else %}
      <span class="nt">&lt;p&gt;</span>No polls are available.<span class="nt">&lt;/p&gt;</span>
{% endif %}
</pre></div>
</div>
<p>polls/detail.html</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;h1&gt;</span>{{ poll.question }}<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;ul&gt;</span>
{% for choice in poll.choice_set.all %}
      <span class="nt">&lt;li&gt;</span>{{ choice.choice_text }}<span class="nt">&lt;/li&gt;</span>
{% endfor %}
<span class="nt">&lt;/ul&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Jinja2ãŒã„ã„ã‹ã‚‚?</p>
<p>è¨˜æ³•ã¯Jinja2ã¨ã‚ˆãä¼¼ã¦ã„ã‚‹ã€‚Jinja2ã‚’ä½¿ç”¨ã—ãŸã“ã¨ã®ã‚ã‚‹äººã§ã‚ã‚Œã°é•å’Œæ„Ÿãªãä½¿ãˆãã†ã€‚</p>
<p>ã—ã‹ã—ã€Jinja2ã®ã»ã†ãŒå„ªã‚ŒãŸæ©Ÿèƒ½ãŒå¤šã„ã®ã§Djangoãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãªã‚“ã¦ä½¿ã£ã¦ã‚‰ã‚Œãªã„ãƒƒï¼ã¨ã„ã†æ–¹ãŒå¤šã„ã‹ã¨æ€ã„ã¾ã™ã€‚</p>
<p class="last">ãã®ã‚ˆã†ãªå ´åˆã¯ã€django-jinjaã¨ã„ã†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒã‚ã‚‹ã®ã§ãã¡ã‚‰ã‚’ã€‚( <a class="reference external" href="https://django-jinja.readthedocs.org/en/latest/">django-jinja â€” django-jinja 0.19 documentation</a> )</p>
</div>
<p>ã“ã®ã¾ã¾ã§ã¯ä½œæˆã—ãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’è¡¨ç¤ºã§ããªã„ã®ã§ã€viewã‚’å¤‰æ›´ã—ã¾ã™ã€‚</p>
</div>
<div class="section" id="id10">
<h4><a class="toc-backref" href="#id25">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ç”¨ã™ã‚‹view</a></h4>
<p>ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã¯ã€django.shortcutsã‚’ä½¿ã‚ãªã„æ–¹æ³•ã‚‚ç´¹ä»‹ã—ã¦ã„ã‚‹ã®ã§ã™ãŒã‚³ãƒ¼ãƒ‰ãŒå†—é•·ã«ãªã‚‹ã®ã§ç´¹ä»‹ã—ã¾ã›ã‚“ã€‚</p>
<p>polls/views.py</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span><span class="p">,</span> <span class="n">get_object_or_404</span>

<span class="kn">from</span> <span class="nn">polls.models</span> <span class="kn">import</span> <span class="n">Poll</span>

<span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">latest_poll_list</span> <span class="o">=</span> <span class="n">Poll</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s">&#39;-pub_date&#39;</span><span class="p">)[:</span><span class="mi">5</span><span class="p">]</span>
    <span class="n">context</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;latest_poll_list&#39;</span> <span class="p">:</span> <span class="n">latest_poll_list</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">&#39;polls/index.html&#39;</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">detail</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">poll_id</span><span class="p">):</span>
    <span class="n">poll</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">Poll</span><span class="p">,</span> <span class="n">pk</span> <span class="o">=</span> <span class="n">poll_id</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">&#39;polls/detail.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;poll&#39;</span> <span class="p">:</span> <span class="n">poll</span><span class="p">})</span>
</pre></div>
</div>
<p>renderé–¢æ•°ã§ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’æŒ‡å®šã™ã‚‹ã€‚</p>
<p>ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã§contextã§è¡¨ã•ã‚Œã‚‹è¾æ›¸å‹ã®å¼•æ•°ã«ã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ä½¿ç”¨å¯èƒ½ãªå¤‰æ•°ã‚’æŒ‡å®šã—ã¾ã™ã€‚</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>shortcutsãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«</p>
<p>ã“ã“ã«ã¯ä¾¿åˆ©é–¢æ•°ãŒå®šç¾©ã—ã¦ã‚ã‚Šã¾ã™ã€‚ã©ã®ãã‚‰ã„ä¾¿åˆ©ã‹ã¨ã„ã†ã¨</p>
<p>ä¾‹) ã“ã“ã§ä½¿ã£ã¦ã„ã‚‹get_object_or_404ã‚’ä½¿ã‚ãªã„ã§æ›¸ã“ã†ã¨ã™ã‚‹ã¨ã€Poll.object.get(pk=poll_id)ã‚’try-exceptã—ã¦Http404ã‚’è¿”ã™ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã‹ãªã„ã¨ã„ã‘ãªã„ã€‚æœ€ä½ã§ã‚‚5è¡Œã‹ã‹ã‚‹ã€‚get_object_or_404ã‚’ä½¿ãˆã°ãã‚ŒãŒ1è¡Œã§ã§ãã‚‹ã€‚</p>
<p>çŸ¥ã£ã¦ãŸã‚‰ç©æ¥µçš„ã«ä½¿ã£ã¦ã„ãæ„Ÿã˜ã§ã™ã€‚</p>
<p class="last"><a class="reference external" href="https://docs.djangoproject.com/en/1.5/topics/http/shortcuts/">Django shortcut functions | Django documentation | Django</a></p>
</div>
</div>
</div>
<div class="section" id="form">
<h3><a class="toc-backref" href="#id26">formå‡¦ç†</a></h3>
<p>ã„ã‚ˆã„ã‚ˆæŠ•ç¥¨å‡ºæ¥ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚å…ˆã»ã©ã®detail.htmlã«formã‚’ã¤ã‘ã¾ã™ã€‚</p>
<p>polls/detail.html</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;h1&gt;</span>{{ poll.question }}<span class="nt">&lt;/h1&gt;</span>

{% if error_message %}<span class="nt">&lt;p&gt;&lt;strong&gt;</span>{{ error_message }}<span class="nt">&lt;/strong&gt;&lt;/p&gt;</span>{% endif %}

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">&quot;{% url &#39;polls:vote&#39; poll.id %}&quot;</span> <span class="na">method=</span><span class="s">&quot;post&quot;</span><span class="nt">&gt;</span>
{% csrf_token %}
{% for choice in poll.choice_set.all %}
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;radio&quot;</span> <span class="na">name=</span><span class="s">&quot;choice&quot;</span> <span class="na">id=</span><span class="s">&quot;choice{{ forloop.counter }}&quot;</span> <span class="na">value=</span><span class="s">&quot;{{ choice.id }}&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;choice{{ forloop.counter }}&quot;</span><span class="nt">&gt;</span>{{ choice.choice_text }}<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
{% endfor %}
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">value=</span><span class="s">&quot;Vote&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>forloop - django template -</p>
<p>djangoãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®foræ–‡ã§ã¯forloopãŒä½¿ãˆã‚‹ã€‚</p>
<p>counter, recounter, first, last, parentloopã¨ã„ã£ãŸforãƒ«ãƒ¼ãƒ—ä¸­ã§ä¾¿åˆ©ãªæ©Ÿèƒ½ãŒã‚ã‚‹ã€‚</p>
<p class="last"><a class="reference external" href="https://docs.djangoproject.com/en/1.5/ref/templates/builtins/#std:templatetag-for">Built-in template tags and filters | Django documentation | Django</a></p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>csrf_token</p>
<p>Cross Site Request Forgeryå¯¾ç­–ã®ãŸã‚formè¦ç´ ã«ä»˜ã‘ã‚‹ã€‚</p>
<p>å ´æ‰€ã¯formã‚¿ã‚°ã®ã™ãã‚ã¨ã€‚</p>
<p class="last"><a class="reference external" href="https://docs.djangoproject.com/en/1.5/ref/contrib/csrf/">Cross Site Request Forgery protection | Django documentation | Django</a></p>
</div>
<p>ãƒ‡ãƒ¼ã‚¿ãŒpostã•ã‚Œã‚‹å…ˆã¯polls.voteã¨æŒ‡å®šã—ã¦ã‚ã‚‹ã®ã§ã€viewã«ã‚ã‚‹voteé–¢æ•°ã‚’å®Ÿè£…ã™ã‚‹ã€‚</p>
<p>polls/views.py</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span><span class="p">,</span> <span class="n">HttpResponseRedirect</span>
<span class="kn">from</span> <span class="nn">django.core.urlresolvers</span> <span class="kn">import</span> <span class="n">reverse</span>

<span class="c"># ...</span>

<span class="k">def</span> <span class="nf">vote</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">poll_id</span><span class="p">):</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">Poll</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">poll_id</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">selected_choice</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">choice_set</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">[</span><span class="s">&#39;choice&#39;</span><span class="p">])</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="n">Choice</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">&#39;polls/detial.html&#39;</span><span class="p">,</span> <span class="p">{</span>
            <span class="s">&#39;poll&#39;</span> <span class="p">:</span> <span class="n">p</span><span class="p">,</span>
            <span class="s">&#39;error_message&#39;</span> <span class="p">:</span> <span class="s">&quot;You didn&#39;t select a choice.&quot;</span><span class="p">,</span>
            <span class="p">})</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">selected_choice</span><span class="o">.</span><span class="n">votes</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">selected_choice</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">HttpResponseRedirect</span><span class="p">(</span><span class="n">reverse</span><span class="p">(</span><span class="s">&#39;polls:results&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">id</span><span class="p">,)))</span>
</pre></div>
</div>
<p>ã“ã‚Œã§ã‚ã¨ã¯ã€polls/urls.pyã«</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">url</span><span class="p">(</span><span class="s">r&#39;^(?P&lt;poll_id&gt;\d+)/vote/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">vote</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;vote&#39;</span><span class="p">),</span>
</pre></div>
</div>
<p>ã¨æ›¸ã„ã¦ã‚ã‚Œã°æŠ•ç¥¨å‡ºæ¥ã‚‹ã€‚</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>shortcuts.redirectã‚’ä½¿ã†</p>
<p>HttpResponseRedirect(reverse(...), args=...)ã¯å†—é•·ãªã®ã§shortcuts.redirectã‚’ä½¿ã„ã¾ã—ã‚‡ã†ã€‚</p>
<p>ä½¿ã„æ–¹ã¯ç°¡å˜ã€‚</p>
<p>return redirect(&#8216;polls:results&#8217;, poll_id=p.id)</p>
<p class="last">ã‚ã‹ã‚Šã‚„ã™ã„ï¼</p>
</div>
<p>ã“ã®ã¾ã¾ã§æŠ•ç¥¨ã¯ã§ããŸã‘ã©çµæœãŒã‚ã‹ã‚‰ãªã„ã®ã§ã€resultsã‚‚å®Ÿè£…ã™ã‚‹ã€‚</p>
<p>polls/templates/polls/results.html</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;h1&gt;</span>{{ poll.question }}<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;ul&gt;</span>
{% for choice in poll.choice_set.all %}
    <span class="nt">&lt;li&gt;</span>{{ choice.choice_text }} -- {{ choice.votes }} vote{{ choice.votes|pluralize }}<span class="nt">&lt;/li&gt;</span>
{% endfor %}
<span class="nt">&lt;/ul&gt;</span>

<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;{% url &#39;polls:detail&#39; poll.id %}&quot;</span><span class="nt">&gt;</span>Vote again?<span class="nt">&lt;/a&gt;</span>
</pre></div>
</div>
<p>polls/views.py</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">results</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">poll_id</span><span class="p">):</span>
    <span class="n">poll</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">Poll</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">poll_id</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">&#39;polls/results.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;poll&#39;</span><span class="p">:</span> <span class="n">poll</span><span class="p">})</span>
</pre></div>
</div>
<div class="section" id="view-generic-views">
<h4><a class="toc-backref" href="#id27">viewã®æ”¹å–„ - generic views -</a></h4>
<p>Djangoã«ã¯generic viewsã¨ã„ã†viewã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒã‚ã‚Šã€ã“ã‚Œã‚’ä½¿ã†ã“ã¨ã§viewsã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«è¨˜è¿°ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<p>genericã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—æŠ½è±¡ã‚¯ãƒ©ã‚¹ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã®ã§ãã‚Œã‚‰ã‚’ç¶™æ‰¿ã—ã¦ä½¿ã„ã¾ã™ã€‚</p>
<p>polls/urls.pyã¨polls/views.pyã‚’ä¿®æ­£ã—ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¾ã™ã€‚</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">patterns</span><span class="p">,</span> <span class="n">url</span>

<span class="kn">from</span> <span class="nn">polls</span> <span class="kn">import</span> <span class="n">views</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">IndexView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;index&#39;</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^(?P&lt;pk&gt;\d+)/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">DetailView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;detail&#39;</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^(?P&lt;pk&gt;\d+)/results/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">ResultsView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;results&#39;</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^(?P&lt;poll_id&gt;\d+)/vote/$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">vote</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;vote&#39;</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>viewsã®é–¢æ•°ã®æŒ‡å®šã‚’&lt;class&gt;.as_view()ã«ã—ã€ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã¯poll_idã‚’pkã«å¤‰æ›´ã—ã¾ã™ã€‚</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># ...</span>

<span class="kn">from</span> <span class="nn">django.views</span> <span class="kn">import</span> <span class="n">generic</span>

<span class="k">class</span> <span class="nc">IndexView</span><span class="p">(</span><span class="n">generic</span><span class="o">.</span><span class="n">ListView</span><span class="p">):</span>
    <span class="n">template_name</span> <span class="o">=</span> <span class="s">&#39;polls/index.html&#39;</span>
    <span class="n">context_object_name</span> <span class="o">=</span> <span class="s">&#39;latest_poll_list&#39;</span>

    <span class="k">def</span> <span class="nf">get_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the last five published polls.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Poll</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s">&#39;-pub_date&#39;</span><span class="p">)[:</span><span class="mi">5</span><span class="p">]</span>


<span class="k">class</span> <span class="nc">DetailView</span><span class="p">(</span><span class="n">generic</span><span class="o">.</span><span class="n">DetailView</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Poll</span>
    <span class="n">template_name</span> <span class="o">=</span> <span class="s">&#39;polls/detail.html&#39;</span>


<span class="k">class</span> <span class="nc">ResultsView</span><span class="p">(</span><span class="n">generic</span><span class="o">.</span><span class="n">DetailView</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Poll</span>
    <span class="n">template_name</span> <span class="o">=</span> <span class="s">&#39;polls/results.html&#39;</span>

<span class="c"># ...</span>
</pre></div>
</div>
<p>indexã¨detailã¨resultsã‚’generic.ListViewåˆã¯generic.DetailViewã‚’ç¶™æ‰¿ã—ãŸã‚¯ãƒ©ã‚¹ã«å¤‰æ›´ã—ã¾ã™ã€‚</p>
<p>ListViewã¨DetailViewå…±é€šã®éƒ¨åˆ†ã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æŒ‡å®šã§ã™ã€‚template_nameã§æŒ‡å®šã§ãã¾ã™ãŒã€æŒ‡å®šã—ãªã„ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</p>
<p>æŒ‡å®šã—ãªã„å ´åˆã¯&lt;app name&gt;/&lt;model name&gt;_list.html or &lt;app name&gt;/&lt;model name&gt;_detail.htmlã¨ãªã‚Šã¾ã™ã€‚</p>
<p>ListViewã§ã¯å¸¸ã«æŒ‡å®šã—ãŸåŒã˜ãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã—ã¾ã™ã€‚è¨€ã„æ›ãˆã‚‹ã¨è¿”ã™ãƒ‡ãƒ¼ã‚¿ã‚’ã‚³ãƒ¼ãƒ‰ã§æŒ‡å®šã§ãã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚</p>
<p>DetailViewã§ã¯modelã«æŒ‡å®šã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ã€ä¸ãˆã‚‰ã‚ŒãŸprimary key(pk)ã‚’ã‚‚ã¨ã«ãƒ‡ãƒ¼ã‚¿ã‚’è‡ªå‹•çš„ã«å–å¾—ã—ã¦ãã‚Œã¾ã™ã€‚</p>
<p>ãªã®ã§ã€polls/urls.pyã§poll_idã‹ã‚‰pkã«å¤‰æ›´ã—ãŸã¨ã„ã†ã“ã¨ã§ã™ã€‚</p>
<p>ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã¯ã“ã®ãã‚‰ã„ã®èª¬æ˜ã—ã‹ã‚ã‚Šã¾ã›ã‚“ãŒã€ã‚‚ã£ã¨è©³ã—ãçŸ¥ã£ãŸã»ã†ãŒã„ã„ã§ã—ã‚‡ã†ã€‚</p>
<p><a class="reference external" href="https://docs.djangoproject.com/en/1.5/topics/class-based-views/">Class-based views | Django documentation | Django</a></p>
</div>
</div>
</div>
<div class="section" id="django">
<h2><a class="toc-backref" href="#id28">Djangoã®ãƒ†ã‚¹ãƒˆ</a></h2>
<p>Djangoã«ã¯ãƒ†ã‚¹ãƒˆã«é–¢ã™ã‚‹æ©Ÿèƒ½ã‚‚å«ã¾ã‚Œã¦ã„ã¾ã™ã€‚å„ªç§€ã§ã™ã­ã€‚</p>
<p>å®Ÿã¯ã“ã®Pollã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯æœªæ¥ã®ãƒ‡ãƒ¼ã‚¿(ç™ºè¡¨ã•ã‚Œã¦ã„ãªã„ãƒ‡ãƒ¼ã‚¿)ã«é–¢ã—ã¦ãƒã‚°ã‚’æŠ±ãˆã¦ã„ã¾ã™ã€‚</p>
<p>ã“ã®ãƒã‚°ã‚’ä¿®æ­£ã—ã¤ã¤ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã„ãã¾ã™ã€‚</p>
<div class="section" id="model">
<h3><a class="toc-backref" href="#id29">modelã®ãƒ†ã‚¹ãƒˆ</a></h3>
<p>modelã®Pollã«ã‚ã‚‹was_published_recentlyã¯æœªæ¥ã®ãƒ‡ãƒ¼ã‚¿ãŒã‚ã£ãŸå ´åˆã€ãã‚Œã‚‚ãƒ’ãƒƒãƒˆã—ã¦ã—ã¾ã†ãƒã‚°ã‚’æŠ±ãˆã¦ã„ã¾ã™ã€‚</p>
<p>ã“ã®ã“ã¨ã‚’æ¤œè¨¼ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã¿ã¾ã™ã€‚</p>
<p>ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã¯test.pyã«è¨˜è¿°ã—ã¾ã™ã€‚test.pyã®å ´æ‰€ã¯ãã‚Œãã‚Œã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚©ãƒ«ãƒ€ã€ã¤ã¾ã‚Špollsä»¥ä¸‹ã«é…ç½®ã—ã¾ã™ã€‚</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">datetime</span>

<span class="kn">from</span> <span class="nn">django.utils</span> <span class="kn">import</span> <span class="n">timezone</span>
<span class="kn">from</span> <span class="nn">django.test</span> <span class="kn">import</span> <span class="n">TestCase</span>

<span class="kn">from</span> <span class="nn">polls.models</span> <span class="kn">import</span> <span class="n">Choice</span><span class="p">,</span> <span class="n">Poll</span>

<span class="k">class</span> <span class="nc">PollMethodTests</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">test_was_published_recently_with_future_poll</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        was_published_recently() should return False for polls whose</span>
<span class="sd">        pub_date is in the future</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">future_poll</span> <span class="o">=</span> <span class="n">Poll</span><span class="p">(</span><span class="n">pub_date</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">+</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">30</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">future_poll</span><span class="o">.</span><span class="n">was_published_recently</span><span class="p">(),</span> <span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
<p>å®Ÿè¡Œã¯ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§ã€‚</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>python manage.py <span class="nb">test </span>polls
Creating <span class="nb">test </span>database <span class="k">for </span><span class="nb">alias</span> <span class="s1">&#39;default&#39;</span>...
<span class="nv">F</span>
<span class="o">======================================================================</span>
FAIL: test_was_published_recently_with_future_poll <span class="o">(</span>polls.tests.PollMethodTests<span class="o">)</span>
----------------------------------------------------------------------
Traceback <span class="o">(</span>most recent call last<span class="o">)</span>:
  File <span class="s2">&quot;/path/to/mysite/polls/tests.py&quot;</span>, line 16, in test_was_published_recently_with_future_poll
    self.assertEqual<span class="o">(</span>future_poll.was_published_recently<span class="o">()</span>, False<span class="o">)</span>
AssertionError: True !<span class="o">=</span> False

----------------------------------------------------------------------
Ran 1 <span class="nb">test </span>in 0.001s

FAILED <span class="o">(</span><span class="nv">failures</span><span class="o">=</span>1<span class="o">)</span>
Destroying <span class="nb">test </span>database <span class="k">for </span><span class="nb">alias</span> <span class="s1">&#39;default&#39;</span>...
</pre></div>
</div>
<p>ç¾åœ¨ã®æ™‚é–“ã‚’åŸºæº–ã«æ¤œç´¢ã‚’ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä¿®æ­£ã—ãŸã‚³ãƒ¼ãƒ‰ãŒä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">was_published_recently</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">now</span> <span class="o">=</span> <span class="n">timezone</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">now</span> <span class="o">-</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pub_date</span> <span class="o">&lt;</span> <span class="n">now</span>
</pre></div>
</div>
<p>ã“ã‚Œã§ãƒ†ã‚¹ãƒˆãŒé€šã‚‹ã‚ˆã†ã«ãªã‚‹ã¯ãšã§ã™ã€‚</p>
</div>
<div class="section" id="id11">
<h3><a class="toc-backref" href="#id30">viewã®ãƒ†ã‚¹ãƒˆ</a></h3>
<p>Djangoã¯Viewã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆã—ãŸãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæ©Ÿèƒ½ã‚’å‚™ãˆã¦ã„ã¾ã™ã€‚ãã‚Œã‚’åˆ©ç”¨ã—ã¦Viewã®ãƒ†ã‚¹ãƒˆã‚’ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<p>ãã®ä»•çµ„ã¯ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§ãƒ†ã‚¹ãƒˆã—ãŸçµæœã‚’è¦‹ã‚‹ã¨ã‚ã‹ã‚Šã‚„ã™ã„ã®ã§ã€ã‚ºãƒ©ã‚ºãƒ©ã‚’æ›¸ã„ã¦ã¿ã¾ã™ã€‚</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">django.test.utils</span> <span class="kn">import</span> <span class="n">setup_test_environment</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">setup_test_environment</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">django.test.client</span> <span class="kn">import</span> <span class="n">Client</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># create an instance of the client for our use</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># get a response from &#39;/&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># we should expect a 404 from that address</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="go">404</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># on the other hand we should expect to find something at &#39;/polls/&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># we&#39;ll use &#39;reverse()&#39; rather than a harcoded URL</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">django.core.urlresolvers</span> <span class="kn">import</span> <span class="n">reverse</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">reverse</span><span class="p">(</span><span class="s">&#39;polls:index&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="go">200</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">content</span>
<span class="go">&#39;\n\n\n    &lt;p&gt;No polls are available.&lt;/p&gt;\n\n&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># note - you might get unexpected results if your ``TIME_ZONE``</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># in ``settings.py`` is not correct. If you need to change it,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># you will also need to restart your shell session</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">polls.models</span> <span class="kn">import</span> <span class="n">Poll</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">django.utils</span> <span class="kn">import</span> <span class="n">timezone</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># create a Poll and save it</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">Poll</span><span class="p">(</span><span class="n">question</span><span class="o">=</span><span class="s">&quot;Who is your favorite Beatle?&quot;</span><span class="p">,</span> <span class="n">pub_date</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">now</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># check the response once again</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;/polls/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">content</span>
<span class="go">&#39;\n\n\n    &lt;ul&gt;\n    \n        &lt;li&gt;&lt;a href=&quot;/polls/1/&quot;&gt;Who is your favorite Beatle?&lt;/a&gt;&lt;/li&gt;\n    \n    &lt;/ul&gt;\n\n&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="s">&#39;latest_poll_list&#39;</span><span class="p">]</span>
<span class="go">[&lt;Poll: Who is your favorite Beatle?&gt;]</span>
</pre></div>
</div>
<p>ã¯ã˜ã‚ã®5è¡Œã¯TestCaseãŒç”¨æ„ã—ã¦ãã‚Œã¦ã„ã‚‹ã®ã§ã€test.pyã‚’æ›¸ãéš›ã«ã¯ã‚ã¾ã‚Šæ°—ã«ã—ãªã„ãŒçŸ¥ã£ã¦ãŠã„ãŸã»ã†ãŒã„ã„ã€‚</p>
<p>client.getã¯ç›´æ¥URLã‚’ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã™ã‚‹ã®ã¯è‰¯ããªã„ã®ã§reverseã‚’ä½¿ã†ã€‚</p>
<p>æ¯å›ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã‚ã‘ã«ã¯ã„ã‹ãªã„ã®ã§ã€test.pyã«ãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ã¦ã„ãã€‚</p>
<p>ViewIndexã¨DetailIndexã®ãƒ†ã‚¹ãƒˆ</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">create_poll</span><span class="p">(</span><span class="n">question</span><span class="p">,</span> <span class="n">days</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a poll with the given `question` published the given number of</span>
<span class="sd">    `days` offset to now (negative for polls published in the past,</span>
<span class="sd">    positive for polls that have yet to be published).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">Poll</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">question</span><span class="o">=</span><span class="n">question</span><span class="p">,</span>
        <span class="n">pub_date</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">+</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="n">days</span><span class="p">))</span>

<span class="k">class</span> <span class="nc">PollViewTests</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test_index_view_with_no_polls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        If no polls exist, an appropriate message should be displayed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">reverse</span><span class="p">(</span><span class="s">&#39;polls:index&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertContains</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="s">&quot;No polls are available.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertQuerysetEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="s">&#39;latest_poll_list&#39;</span><span class="p">],</span> <span class="p">[])</span>

    <span class="k">def</span> <span class="nf">test_index_view_with_a_past_poll</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Polls with a pub_date in the past should be displayed on the index page.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">create_poll</span><span class="p">(</span><span class="n">question</span><span class="o">=</span><span class="s">&quot;Past poll.&quot;</span><span class="p">,</span> <span class="n">days</span><span class="o">=-</span><span class="mi">30</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">reverse</span><span class="p">(</span><span class="s">&#39;polls:index&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertQuerysetEqual</span><span class="p">(</span>
            <span class="n">response</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="s">&#39;latest_poll_list&#39;</span><span class="p">],</span>
            <span class="p">[</span><span class="s">&#39;&lt;Poll: Past poll.&gt;&#39;</span><span class="p">]</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_index_view_with_a_future_poll</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Polls with a pub_date in the future should not be displayed on the</span>
<span class="sd">        index page.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">create_poll</span><span class="p">(</span><span class="n">question</span><span class="o">=</span><span class="s">&quot;Future poll.&quot;</span><span class="p">,</span> <span class="n">days</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">reverse</span><span class="p">(</span><span class="s">&#39;polls:index&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertContains</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="s">&quot;No polls are available.&quot;</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertQuerysetEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="s">&#39;latest_poll_list&#39;</span><span class="p">],</span> <span class="p">[])</span>

    <span class="k">def</span> <span class="nf">test_index_view_with_future_poll_and_past_poll</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Even if both past and future polls exist, only past polls should be</span>
<span class="sd">        displayed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">create_poll</span><span class="p">(</span><span class="n">question</span><span class="o">=</span><span class="s">&quot;Past poll.&quot;</span><span class="p">,</span> <span class="n">days</span><span class="o">=-</span><span class="mi">30</span><span class="p">)</span>
        <span class="n">create_poll</span><span class="p">(</span><span class="n">question</span><span class="o">=</span><span class="s">&quot;Future poll.&quot;</span><span class="p">,</span> <span class="n">days</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">reverse</span><span class="p">(</span><span class="s">&#39;polls:index&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertQuerysetEqual</span><span class="p">(</span>
            <span class="n">response</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="s">&#39;latest_poll_list&#39;</span><span class="p">],</span>
            <span class="p">[</span><span class="s">&#39;&lt;Poll: Past poll.&gt;&#39;</span><span class="p">]</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_index_view_with_two_past_polls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The polls index page may display multiple polls.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">create_poll</span><span class="p">(</span><span class="n">question</span><span class="o">=</span><span class="s">&quot;Past poll 1.&quot;</span><span class="p">,</span> <span class="n">days</span><span class="o">=-</span><span class="mi">30</span><span class="p">)</span>
        <span class="n">create_poll</span><span class="p">(</span><span class="n">question</span><span class="o">=</span><span class="s">&quot;Past poll 2.&quot;</span><span class="p">,</span> <span class="n">days</span><span class="o">=-</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">reverse</span><span class="p">(</span><span class="s">&#39;polls:index&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertQuerysetEqual</span><span class="p">(</span>
            <span class="n">response</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="s">&#39;latest_poll_list&#39;</span><span class="p">],</span>
             <span class="p">[</span><span class="s">&#39;&lt;Poll: Past poll 2.&gt;&#39;</span><span class="p">,</span> <span class="s">&#39;&lt;Poll: Past poll 1.&gt;&#39;</span><span class="p">]</span>
        <span class="p">)</span>


<span class="k">class</span> <span class="nc">PollIndexDetailTests</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test_detail_view_with_a_future_poll</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The detail view of a poll with a pub_date in the future should</span>
<span class="sd">        return a 404 not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">future_poll</span> <span class="o">=</span> <span class="n">create_poll</span><span class="p">(</span><span class="n">question</span><span class="o">=</span><span class="s">&#39;Future poll.&#39;</span><span class="p">,</span> <span class="n">days</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">reverse</span><span class="p">(</span><span class="s">&#39;polls:detail&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">future_poll</span><span class="o">.</span><span class="n">id</span><span class="p">,)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">404</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_detail_view_with_a_past_poll</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The detail view of a poll with a pub_date in the past should display</span>
<span class="sd">        the poll&#39;s question.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">past_poll</span> <span class="o">=</span> <span class="n">create_poll</span><span class="p">(</span><span class="n">question</span><span class="o">=</span><span class="s">&#39;Past Poll.&#39;</span><span class="p">,</span> <span class="n">days</span><span class="o">=-</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">reverse</span><span class="p">(</span><span class="s">&#39;polls:detail&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">past_poll</span><span class="o">.</span><span class="n">id</span><span class="p">,)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertContains</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">past_poll</span><span class="o">.</span><span class="n">question</span><span class="p">,</span> <span class="n">status_code</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</pre></div>
</div>
<p>æ—¥ä»˜ã«é–¢ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ãŸãŒã€ã“ã®ã¾ã¾ã§ã¯æœªæ¥ã®ãƒ‡ãƒ¼ã‚¿ãŒå…¥ã‚‹éƒ¨åˆ†ã§ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹ã®ã§Viewã‚’æ›¸ãç›´ã™ã€‚</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.utils</span> <span class="kn">import</span> <span class="n">timezone</span>

<span class="k">class</span> <span class="nc">IndexView</span><span class="p">(</span><span class="n">generic</span><span class="o">.</span><span class="n">ListView</span><span class="p">):</span>
    <span class="n">template_name</span> <span class="o">=</span> <span class="s">&#39;polls/index.html&#39;</span>
    <span class="n">context_object_name</span> <span class="o">=</span> <span class="s">&#39;latest_poll_list&#39;</span>

    <span class="k">def</span> <span class="nf">get_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Poll</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
                <span class="n">pub_date__lte</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
                <span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s">&#39;-pub_date&#39;</span><span class="p">)[:</span><span class="mi">5</span><span class="p">]</span>


<span class="k">class</span> <span class="nc">DetailView</span><span class="p">(</span><span class="n">generic</span><span class="o">.</span><span class="n">DetailView</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Poll</span>
    <span class="n">template_name</span> <span class="o">=</span> <span class="s">&#39;polls/detail.html&#39;</span>

    <span class="k">def</span> <span class="nf">get_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Poll</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pub_date__lte</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">now</span><span class="p">())</span>
</pre></div>
</div>
<p>ã“ã‚Œã§ãƒ†ã‚¹ãƒˆãŒé€šã‚‹ã¯ãšã€‚</p>
</div>
<div class="section" id="id12">
<h3><a class="toc-backref" href="#id31">ãƒ†ã‚¹ãƒˆã«ã¤ã„ã¦</a></h3>
<p>ã‚‚ã—ä»–ã®Viewã«å¯¾ã—ã¦ãƒ†ã‚¹ãƒˆã‚’è¡Œã†å ´åˆã€å¤šåˆ†å¤§ä½“åŒã˜ã‚ˆã†ãªãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã“ã¨ã«ãªã‚‹ã ã‚ã†ã‘ã©ã€ãã‚“ãªã®ã¯åˆ¥ã«ã„ã„ã‚‰ã—ã„ã€‚</p>
<p>ç¢ºã‹ã«ç¾ã—ã•ã¨ã¯é›¢ã‚Œã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ãŒã€ä¸€æ—¦æ›¸ã„ãŸãƒ†ã‚¹ãƒˆã®ã“ã¨ã¯å¿˜ã‚Œã¦æ–°æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¦ã„ã“ã†ã€‚(ä¸€æ—¦æ›¸ã„ãŸãƒ†ã‚¹ãƒˆã¯è‡ªåˆ†ã®ã‚³ãƒ¼ãƒ‰ãŒæ­£ã—ã„ã“ã¨ã‚’è¨¼æ˜ã—ã¦ãã‚Œã‚‹ã€‚)</p>
<p>ä»Šå›æ›¸ã„ãŸãƒ†ã‚¹ãƒˆã¯ChoiceãŒã‚ã‚‹Pollã«ã¯å¯¾å¿œã—ã¦ã„ãªã„ã®ã§ã€ChoiceãŒã‚ã‚‹å ´åˆå¤šãã®ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹ã€‚ã¾ãã€‚ãã‚Œã¯ç›´ã›ã¨ã„ã†ã“ã¨ã ã€‚ã ã£ã¦è‡ªåˆ†ã®ã‚³ãƒ¼ãƒ‰ãŒæ­£ã—ããªã„ã®ã ã‹ã‚‰ã€‚</p>
<p>ãã‚“ãªã“ã‚“ãªã§å†—é•·ãªãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã«ãªã£ã¦ã—ã¾ã†ã‹ã‚‚ã—ã‚Œãªã„ãŒã€ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ãŒå†—é•·ãªã®ã¯æ‚ªã„ã“ã¨ã§ã¯ãªã„ã€‚ãã‚Œã‚ˆã‚Šã‚‚æ„è­˜ã—ãŸã»ã†ãŒã„ã„ã“ã¨ã‚‚ã‚ã‚‹ã€‚</p>
<ol class="arabic simple">
<li>1ã¤ã®Modelã‚„Viewã”ã¨ã«ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ã‚’ç”Ÿæˆã™ã‚‹</li>
<li>ãƒ†ã‚¹ãƒˆã™ã‚‹æ¡ä»¶ã”ã¨ã«åˆ¥ã€…ã«ãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½œæˆã™ã‚‹</li>
<li>ãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰åã¯ãã®ãƒ†ã‚¹ãƒˆã®å†…å®¹ã‚’èª¬æ˜ã—ã¦ã„ã‚‹</li>
</ol>
<p>ã“ã“ã§ç´¹ä»‹ã—ã¦ã„ã‚‹ãƒ†ã‚¹ãƒˆæŠ€æ³•ã¯åŸºæœ¬çš„ãªã‚‚ã®ã ã‘ã§ã‚ã‚‹ã€‚ä»–ã®å„ªã‚ŒãŸãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã†ã“ã¨ã§ã‚‚ã£ã¨å¤šãã®ã“ã¨ãŒã§ãã‚‹ã€‚</p>
<div class="section" id="selenium">
<h4><a class="toc-backref" href="#id32">Selenium</a></h4>
<p><a class="reference external" href="http://docs.seleniumhq.org/">Selenium - Web Browser Automation</a></p>
<p>Seleniumã‚’ä½¿ã£ã¦ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰(html, javascript)ã®ãƒ†ã‚¹ãƒˆã‚’ã™ã‚‹ã€‚</p>
<p>LiveServerTestCaseã¨çµ„ã¿åˆã‚ã›ã‚‹ã¨é€£æºãŒä¾¿åˆ©ã«ãªã‚‹ã€‚</p>
<p><a class="reference external" href="https://docs.djangoproject.com/en/1.5/topics/testing/overview/#django.test.LiveServerTestCase">Testing Django applications | Django documentation | Django</a></p>
</div>
<div class="section" id="coverage-py">
<h4><a class="toc-backref" href="#id33">coverage.py</a></h4>
<p><a class="reference external" href="http://nedbatchelder.com/code/coverage/">Ned Batchelder: coverage.py</a></p>
<p>ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ„ãƒ¼ãƒ«ã®coverage.pyã‚’ä½¿ç”¨ã™ã‚‹ã€‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã‚‚ä½¿ç”¨æ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¦ã‚ã‚‹ã€‚</p>
<p><a class="reference external" href="https://docs.djangoproject.com/en/1.5/topics/testing/advanced/#topics-testing-code-coverage">Advanced testing topics | Django documentation | Django</a></p>
</div>
</div>
</div>
<div class="section" id="look-and-feel">
<h2><a class="toc-backref" href="#id34">Look and Feel</a></h2>
<p>cssã‚„ç”»åƒã€javascriptã‚’ä½¿ã£ã¦è¦‹ãŸç›®ã‚’æ”¹å–„ã—ã¦ã¿ã‚‹ã€‚</p>
<p>ä½œæˆã™ã‚‹å ´æ‰€ã¯polls/static/pollsã€‚CSSãƒ•ã‚¡ã‚¤ãƒ«(style.css)ã‚’è¿½åŠ ã™ã‚‹ã€‚</p>
<p>polls/static/polls/style.css</p>
<div class="highlight-css"><div class="highlight"><pre><span class="nt">li</span> <span class="nt">a</span> <span class="p">{</span>
  <span class="k">color</span><span class="o">:</span> <span class="nb">green</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>cssãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã‚’index.htmlã§ã‚„ã£ã¦ã¿ã‚‹ã¨ã€</p>
<div class="highlight-html"><div class="highlight"><pre>{% load staticfiles %}

<span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">href=</span><span class="s">&quot;{% static &#39;polls/style.css&#39; %}&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p>ç”»åƒã®èª­ã¿è¾¼ã¿ã‚‚ã—ã¦ã¿ãŸã„ã‹ã‚‚ã—ã‚Œãªã„ã€‚</p>
<div class="highlight-css"><div class="highlight"><pre><span class="nt">body</span> <span class="p">{</span>
  <span class="k">background</span><span class="o">:</span> <span class="nb">white</span> <span class="sx">url(&quot;images/background.gif&quot;)</span> <span class="k">no-repeat</span> <span class="k">right</span> <span class="k">bottom</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>ç”»åƒã¯polls/static/polls/imagesã«é…ç½®ã™ã‚‹ã€‚</p>
<p>cssãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚‚urlé–¢æ•°ã‚’ä½¿ç”¨ã—ã¦å¯¾è±¡ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹ã€‚</p>
</div>
<div class="section" id="tips">
<h2><a class="toc-backref" href="#id35">ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã«ã¯ãªã„Tips</a></h2>
<div class="section" id="mysql">
<h3><a class="toc-backref" href="#id36">MySQLã‚’ä½¿ã†</a></h3>
<p>settings.pyã‚’æ›¸ãæ›ãˆã‚‹ã€‚</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s">&#39;django.db.backends.mysql&#39;</span><span class="p">,</span> <span class="c"># Add &#39;postgresql_psycopg2&#39;, &#39;mysql&#39;, &#39;sqlite3&#39; or &#39;oracle&#39;.</span>
      <span class="s">&#39;NAME&#39;</span><span class="p">:</span> <span class="s">&#39;XXXXX&#39;</span><span class="p">,</span>                      <span class="c"># Or path to database file if using sqlite3.</span>
      <span class="c"># The following settings are not used with sqlite3:</span>
      <span class="s">&#39;USER&#39;</span><span class="p">:</span> <span class="s">&#39;root&#39;</span><span class="p">,</span>
      <span class="s">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="s">&#39;password&#39;</span><span class="p">,</span>
      <span class="s">&#39;HOST&#39;</span><span class="p">:</span> <span class="s">&#39;localhost&#39;</span><span class="p">,</span>                      <span class="c"># Empty for localhost through domain sockets or &#39;127.0.0.1&#39; for localhost through TCP.</span>
      <span class="s">&#39;PORT&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">,</span>                      <span class="c"># Set to empty string for default.</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ &amp; MySQL-Pythonã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚</p>
<div class="highlight-bash"><div class="highlight"><pre>% pip install mysql-python
% mysql -u root -p password
mysql&gt; create database XXXXX;
mysql&gt; <span class="nb">exit</span>;
% python manage.py syncdb
</pre></div>
</div>
</div>
<div class="section" id="django-suit">
<h3><a class="toc-backref" href="#id37">Django Suit</a></h3>
<p>èª°ã§ã‚‚ã‹ã£ã“ã¤ã‘ãŸã„ã€‚Adminç”»é¢ã‚‚ãã£ã¨ãã†ã€‚</p>
<p><a class="reference external" href="http://django-suit.readthedocs.org/en/develop/">Django Suit documentation â€” Django Suit 0.2.2 documentation</a></p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>workon Django
<span class="o">(</span>Django<span class="o">)</span><span class="nv">$ </span>pip install django-suit
</pre></div>
</div>
<p>settings.pyã«ä»¥ä¸‹ã‚’è¿½åŠ </p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="o">...</span>
    <span class="s">&#39;suit&#39;</span><span class="p">,</span>
    <span class="s">&#39;django.contrib.admin&#39;</span><span class="p">,</span>
<span class="p">)</span>

<span class="kn">from</span> <span class="nn">django.conf.global_settings</span> <span class="kn">import</span> <span class="n">TEMPLATE_CONTEXT_PROCESSORS</span> <span class="k">as</span> <span class="n">TCP</span>

<span class="n">TEMPLATE_CONTEXT_PROCESSORS</span> <span class="o">=</span> <span class="n">TCP</span> <span class="o">+</span> <span class="p">(</span>
    <span class="s">&#39;django.core.context_processors.request&#39;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p><a class="reference external" href="http://djangosuit.com/">Django Suit - Modern theme for Django admin interface</a></p>
</div>
</div>
</div>

    <div class="postmeta">
        <div class="author">
            <span>Posted by Yuya Yano</span>
        </div>
        
        <div class="tags">
            <span>
                Tags:
                <a href="../../../tags/python.html">python</a>, <a href="../../../tags/django.html">Django</a></span>
        </div>
        </div><ul class="related clearfix">
            <li class="left"> &laquo; <a href="../../10/02/hg_git.html">gitãŒæ‰‹ã«ãªã˜ã¾ãªã„äººã¸hg-gitã®ã‚¹ã‚¹ãƒ¡</a></li>
            <li class="right"><a href="../../08/18/pyenv.html">pyenvãªå¤ in 2013</a> &raquo; </li>
        </ul><div id="disqus_thread"></div><script type="text/javascript">    var disqus_shortname = "yano";    var disqus_identifier = "2013/09/12/django_v15_tutorial";    disqus_thread();</script><noscript>Please enable JavaScript to view the    <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></article><aside class="sidebar"><section><!--<div class="twitter-widget">-->
	<a class="twitter-timeline" href="https://twitter.com/yymm6666"  data-widget-id="379832101496844288">@yymm6666 $B$+$i$N%D%$!<%H(B</a>
	<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
<!--</div>--></section><section><div class="widget">
    <h1>Recent Posts</h1>
    <ul><li>
            <a href="../../../2014/03/19/unity.html">Ubuntuã§Unityã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚‹ã¾ã§ with Wine</a>
        </li><li>
            <a href="../../12/26/pusher_flask.html">Flaskã§Pusherã‚’ä½¿ã†</a>
        </li><li>
            <a href="../../12/13/c_proj_template.html">Cè¨€èªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½œã£ã¦ã¿ãŸ for Linux</a>
        </li><li>
            <a href="../../10/18/ci.html">CI Tools for Python</a>
        </li><li>
            <a href="../../10/03/ipython_entrance.html">IPython Notebookã§ã‹ã£ã“ã„ã„ã‚°ãƒ©ãƒ•ã‚’æ›¸ã</a>
        </li><li>
            <a href="../../10/02/hg_git.html">gitãŒæ‰‹ã«ãªã˜ã¾ãªã„äººã¸hg-gitã®ã‚¹ã‚¹ãƒ¡</a>
        </li><li>
            <a href="#">Django 1.5 ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ« ã¾ã¨ã‚</a>
        </li><li>
            <a href="../../08/18/pyenv.html">pyenvãªå¤ in 2013</a>
        </li><li>
            <a href="../../08/08/timewatcher_c.html">Cè¨€èªã§å®Ÿæ™‚é–“ã‚’æ¸¬å®šã™ã‚‹ Windows && Linux</a>
        </li><li>
            <a href="../../07/14/more_emacs.html">Emacsãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†</a>
        </li></ul>
</div>
</section><section><div class="widget" id="searchbox">
    <h1>Search</h1>
    <form action="../../../search.html" method="get">
        <input type="text" name="q" />
        <button type="submit"><span class="webfont">L</span></button>
    </form>
</div></section><section><div class="widget">
    <h1>Tags Cloud</h1>
      <a href="../../../tags/c.html" style="font-size: 10pt">c</a>&nbsp;&nbsp;
      <a href="../../../tags/c.html" style="font-size: 8pt">c++</a>&nbsp;&nbsp;
      <a href="../../../tags/centos.html" style="font-size: 8pt">centos</a>&nbsp;&nbsp;
      <a href="../../../tags/centos.html" style="font-size: 8pt">Centos</a>&nbsp;&nbsp;
      <a href="../../../tags/ci.html" style="font-size: 8pt">CI</a>&nbsp;&nbsp;
      <a href="../../../tags/design.html" style="font-size: 8pt">design</a>&nbsp;&nbsp;
      <a href="../../../tags/django.html" style="font-size: 8pt">Django</a>&nbsp;&nbsp;
      <a href="../../../tags/emacs.html" style="font-size: 12pt">emacs</a>&nbsp;&nbsp;
      <a href="../../../tags/fortran.html" style="font-size: 8pt">fortran</a>&nbsp;&nbsp;
      <a href="../../../tags/heroku.html" style="font-size: 8pt">heroku</a>&nbsp;&nbsp;
      <a href="../../../tags/hg.html" style="font-size: 8pt">hg</a>&nbsp;&nbsp;
      <a href="../../../tags/life.html" style="font-size: 8pt">life</a>&nbsp;&nbsp;
      <a href="../../../tags/linux.html" style="font-size: 8pt">linux</a>&nbsp;&nbsp;
      <a href="../../../tags/linux.html" style="font-size: 9pt">Linux</a>&nbsp;&nbsp;
      <a href="../../../tags/mac.html" style="font-size: 12pt">mac</a>&nbsp;&nbsp;
      <a href="../../../tags/mercurial.html" style="font-size: 8pt">mercurial</a>&nbsp;&nbsp;
      <a href="../../../tags/mysql.html" style="font-size: 8pt">MySQL</a>&nbsp;&nbsp;
      <a href="../../../tags/python.html" style="font-size: 8pt">Python</a>&nbsp;&nbsp;
      <a href="../../../tags/python.html" style="font-size: 20pt">python</a>&nbsp;&nbsp;
      <a href="../../../tags/qt.html" style="font-size: 8pt">Qt</a>&nbsp;&nbsp;
      <a href="../../../tags/rake.html" style="font-size: 8pt">rake</a>&nbsp;&nbsp;
      <a href="../../../tags/ruby.html" style="font-size: 9pt">ruby</a>&nbsp;&nbsp;
      <a href="../../../tags/screen.html" style="font-size: 8pt">screen</a>&nbsp;&nbsp;
      <a href="../../../tags/sphinx.html" style="font-size: 9pt">sphinx</a>&nbsp;&nbsp;
      <a href="../../../tags/tdd.html" style="font-size: 8pt">TDD</a>&nbsp;&nbsp;
      <a href="../../../tags/testingframework.html" style="font-size: 8pt">TestingFramework</a>&nbsp;&nbsp;
      <a href="../../../tags/tinkerer.html" style="font-size: 8pt">tinkerer</a>&nbsp;&nbsp;
      <a href="../../../tags/ubuntu.html" style="font-size: 8pt">Ubuntu</a>&nbsp;&nbsp;
      <a href="../../../tags/unity.html" style="font-size: 8pt">Unity</a>&nbsp;&nbsp;
      <a href="../../../tags/vim.html" style="font-size: 8pt">vim</a>&nbsp;&nbsp;
      <a href="../../../tags/vps.html" style="font-size: 8pt">vps</a>
</div></section></aside></div> <!-- #main --></div> <!-- #main-container -->

        <div class="footer-container"><footer class="wrapper">&copy; Copyright 2013, Yuya Yano. Powered by <a href="http://www.tinkerer.me/">Tinkerer</a> and <a href="http://sphinx.pocoo.org/">Sphinx</a>.</footer></div> <!-- footer-container -->

      </div> <!--! end of #container --><!--[if lt IE 7 ]>
          <script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script>
          <script>window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})</script>
        <![endif]-->
    </body>
</html>